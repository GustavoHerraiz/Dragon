<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, width=device-width" />
    <title>Registro - Blade Corporation</title>
    <link rel="stylesheet" href="./global.css" />
    <link rel="stylesheet" href="./index.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;600;700&display=swap" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400&display=swap" />
    <style>
        /* Estilos adicionales para ajuste perfecto */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            background: var(--color-gray-200);
        }
    </style>
</head>
<body>
    <div class="wwwbladecorporationnet-6 animate" style="flex: 1; display: flex; flex-direction: column;">
        <header class="head-blade" style="flex-shrink: 0;">
            <div class="logo-blade-corp" style="transform: scale(0.9);">
                <img class="logo-blade-corp-child" alt="Logo" src="./public/group-1@2x.png" />
                <div class="blade-corporation" style="font-size: var(--font-size-xl);">Blade Corporation</div>
            </div>
            <nav class="menu" style="gap: var(--space-200);">
                <div class="verificador-mbh" style="font-size: var(--font-size-xs);" 
                     onclick="window.location.href='index.html'">Inicio</div>
                <div class="verificador-mbh" style="font-size: var(--font-size-xs);" 
                     onclick="window.location.href='index.html#sectionServiciosContainer'">Servicios</div>
                <div class="verificador-mbh" style="font-size: var(--font-size-xs);" 
                     onclick="window.location.href='index.html#sectionPlanesContainer'">Planes</div>
            </nav>
            <div class="contacto">
                <button class="botom" onclick="window.location.href='login.html'" style="padding: 6px 12px;">
                    <div class="accede-a-dragn" style="font-size: var(--font-size-xs);">Iniciar sesión</div>
                    <img class="icon" alt="Ícono" src="./public/dragon-2.svg" style="width: 14px; height: 14px;" />
                </button>
            </div>
        </header>

        <section class="hero" data-animate-on-scroll style="flex: 1; display: flex; align-items: center; justify-content: center; padding: 20px;">
            <div class="verificador-mbh-parent" 
                 style="max-width: 400px;
                        width: 100%;
                        padding: var(--space-600);
                        background: var(--color-gray-100);
                        border: 1px solid var(--color-aquamarine-100);
                        border-radius: var(--br-5xs);
                        box-shadow: 0 4px 20px rgba(22, 223, 172, 0.1);">
                <h1 class="el-valor-de" 
                    style="color: var(--color-aquamarine-100);
                           margin-bottom: var(--space-600);
                           text-align: center;
                           font-size: var(--font-size-21xl);
                           line-height: 1.2;">REGISTRO</h1>
                
                <form id="registroForm" class="form" style="display: grid; gap: var(--space-400);">
                    <div class="input-field">
                        <label class="nombre" 
                               style="display: block;
                                      color: var(--color-white);
                                      margin-bottom: var(--space-200);
                                      font-size: var(--body-base-size);">
                            Nombre completo
                        </label>
                        <input type="text" id="nombre" required 
                               style="width: 100%;
                                      padding: var(--space-300);
                                      background: var(--color-gray-200);
                                      border: 1px solid var(--color-aquamarine-100);
                                      border-radius: var(--br-8xs);
                                      color: var(--color-white);
                                      font-size: var(--font-size-xs);" 
                               placeholder="" />
                    </div>
                    
                    <div class="input-field">
                        <label class="nombre" 
                               style="display: block;
                                      color: var(--color-white);
                                      margin-bottom: var(--space-200);
                                      font-size: var(--body-base-size);">
                            Correo electrónico
                        </label>
                        <input type="email" id="email" required 
                               style="width: 100%;
                                      padding: var(--space-300);
                                      background: var(--color-gray-200);
                                      border: 1px solid var(--color-aquamarine-100);
                                      border-radius: var(--br-8xs);
                                      color: var(--color-white);
                                      font-size: var(--font-size-xs);" 
                               placeholder="Ejemplo: david@miempresa.com" />
                    </div>
                    
                    <div class="input-field">
                        <label class="nombre" 
                               style="display: block;
                                      color: var(--color-white);
                                      margin-bottom: var(--space-200);
                                      font-size: var(--body-base-size);">
                            Contraseña
                        </label>
                        <input type="password" id="password" required 
                               style="width: 100%;
                                      padding: var(--space-300);
                                      background: var(--color-gray-200);
                                      border: 1px solid var(--color-aquamarine-100);
                                      border-radius: var(--br-8xs);
                                      color: var(--color-white);
                                      font-size: var(--font-size-xs);" 
                               placeholder="Mínimo 8 caracteres" />
                    </div>
                    
                    <button type="submit" class="botom2" 
                            style="width: 100%;
                                   padding: var(--space-300);
                                   background: var(--color-aquamarine-100);
                                   color: var(--color-gray-200);
                                   border: none;
                                   border-radius: var(--br-11xl);
                                   font-weight: 600;
                                   font-size: var(--body-base-size);
                                   cursor: pointer;
                                   transition: all 0.2s ease;
                                   display: flex;
                                   align-items: center;
                                   justify-content: center;
                                   gap: var(--space-200);">
                        Registrarse
                        <img src="./public/dragon-2.svg" alt="Ícono" 
                             style="width: 16px; height: 16px;" />
                    </button>
                    
                    <div class="auth-links" style="margin-top: var(--space-600); text-align: center;">
                        <a href="login.html" 
                           style="color: var(--color-aquamarine-100);
                                  text-decoration: none;
                                  display: block;
                                  margin: var(--space-200) 0;
                                  font-size: var(--font-size-xs);">
                            ¿Ya tienes cuenta? <span style="font-weight: 600;">Inicia sesión</span>
                        </a>
                        
                    </div>
                </form>
                
                <div id="mensaje" 
                     style="margin-top: var(--space-10);
                            padding: var(--space-10);
                            text-align: center;
                            font-size: var(--font-size-xs);
                            border-radius: var(--br-8xs);"></div>
            </div>
        </section>
    </div>

    <script>
        document.getElementById('registroForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const nombre = document.getElementById('nombre').value;
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            
            const mensaje = document.getElementById('mensaje');
            mensaje.textContent = '';
            
            if(password.length < 8) {
                mensaje.textContent = 'La contraseña debe tener al menos 8 caracteres';
                mensaje.style.backgroundColor = 'rgba(223, 22, 22, 0.1)';
                mensaje.style.color = '#df1616';
                return;
            }

            try {
                const response = await fetch('/auth/registro', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ nombre, email, password })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    mensaje.textContent = '✅ Registro exitoso! Redirigiendo...';
                    mensaje.style.backgroundColor = 'rgba(22, 223, 172, 0.1)';
                    mensaje.style.color = '#16dfac';
                    setTimeout(() => window.location.href = 'login.html', 2000);
                } else {
                    mensaje.textContent = `❌ Error: ${data.error}`;
                    mensaje.style.backgroundColor = 'rgba(223, 22, 22, 0.1)';
                    mensaje.style.color = '#df1616';
                }
            } catch (error) {
                mensaje.textContent = '🔴 Error de conexión con el servidor';
                mensaje.style.backgroundColor = 'rgba(223, 22, 22, 0.1)';
                mensaje.style.color = '#df1616';
            }
        });

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if(entry.isIntersecting) {
                    entry.target.classList.add('animate');
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.1 });

        document.querySelectorAll('[data-animate-on-scroll]').forEach(element => {
            observer.observe(element);
        });
    </script>
</body>
</html>
